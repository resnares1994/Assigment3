<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Realtime COVID-19</title>
    <link rel="stylesheet" href="style.css" />
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
    

</head>

<style>
    .btn-custom{
    background-color: blue;
    color: white;
    border-radius: 20px;
    }
</style>
<body>


    <div class="container-fluid">
        <center>
        <h1>COVID-19 TRACKER</h1>
        </center>

        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-3">
                    </div>
                    <div class="col-sm-4">
                        <input class="form-control" type="text" name="kota" placeholder="Country" id="input-kota">
                    </div>
                    <div class="col-sm-1">
                        <button class="btn btn-sm btn-custom" id="btn-change">Get Data</button>
                    </div>
                    <div class="col-sm-3">
                    </div>
                </div>

                <div class="row mt-4">
                        <div class="col-xl-4 col-md-12 mb-4">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                Active Cases</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="active-cases"></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-tachometer-alt fa-2x text-primary"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-4 col-md-12 mb-4">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">                                            
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                New Cases</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="new-cases"></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-regular fa-hospital fa-2x text-info"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-4 col-md-12 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Recovered Cases</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="recovered-cases"></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-check fa-2x text-success"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>

                <div class="row">
                    <div class="col-xl-4 col-md-12 mb-4">
                        <div class="card border-left-danger shadow h-100 py-2">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                            Total Cases</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="total-cases"></div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-bars fa-2x text-danger"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-4 col-md-12 mb-4">
                        <div class="card border-left-secondary shadow h-100 py-2">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">
                                            Total Death</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="total-death"></div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-skull fa-2x text-secondary"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-4 col-md-12 mb-4">
                        <div class="card border-left-warning shadow h-100 py-2">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                            Total Tests</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="total-tests"></div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fas fa-head-side-mask fa-2x text-gray-800"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
            </div>
        </div>
    </div>
        <!-- Bootstrap core JavaScript-->
        <script src="vendor/jquery/jquery.min.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    
        <!-- Core plugin JavaScript-->
        <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    
        <!-- Custom scripts for all pages-->
        <script src="js/sb-admin-2.min.js"></script>
    
        <!-- Page level plugins -->
        <script src="vendor/chart.js/Chart.min.js"></script>
    
        <!-- Page level custom scripts -->
        <script src="js/demo/chart-area-demo.js"></script>
        <script src="js/demo/chart-pie-demo.js"></script>

            <script>
                const options = {
                    method: 'GET',
                    headers: {
                        'X-RapidAPI-Key': '18ceecad46msh521a2e90eea40b0p192075jsn1beeb5d70350',
		                'X-RapidAPI-Host': 'covid-193.p.rapidapi.com'
	                    }
                    };

                    fetch('https://covid-193.p.rapidapi.com/history?country=usa&day=2020-06-02', options)
                    .then(response => {
                        console.log(response, 'line 74');
                        return response.json()
                    })
                    .then(response => {
                        document.getElementById('active-cases').innerHTML = response.response[0].cases.active
                        document.getElementById('new-cases').innerHTML = response.response[0].cases.new
                        document.getElementById('recovered-cases').innerHTML = response.response[0].cases.recovered
                        document.getElementById('total-cases').innerHTML = response.response[0].cases.total
                        document.getElementById('total-death').innerHTML = response.response[0].deaths.total
                        document.getElementById('total-tests').innerHTML = response.response[0].tests.total
                    })
                    .catch(err => console.error(err))
        
                    var buttonChange = document.getElementById('btn-change')
        
                    buttonChange.addEventListener('click', function(event) {
                        event.preventDefault()
                        let inputKota = document.getElementById('input-kota')
                        let namaKota = inputKota.value
                        fetch(`https://covid-193.p.rapidapi.com/history?country=${namaKota}`, options)
                            .then(response => {
                                // ini wajib ada pada fetch supaya data yg diparsing dari server bisa didapatkan
                                return response.json()
                            })
                            .then(response => {
                                console.log(response);
                                document.getElementById('active-cases').innerHTML = response.response[0].cases.active
                                document.getElementById('new-cases').innerHTML = response.response[0].cases.new
                                document.getElementById('recovered-cases').innerHTML = response.response[0].cases.recovered
                                document.getElementById('total-cases').innerHTML = response.response[0].cases.total
                                document.getElementById('total-death').innerHTML = response.response[0].deaths.total
                                document.getElementById('total-tests').innerHTML = response.response[0].tests.total
                            })
                            .catch(err => console.error(err))
                        })
        
            </script>

</body>
</html>